import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Docs/Introduction" />

# プロジェクト理念：「手書き」のカタログ

## 目的

このリポジトリの主な目的は、AIエージェントのための**規範的な参照（または「手書きのサンプル」）**として機能することです。私の特定のコーディングの好みを反映したバニラHTML/CSS/JSコンポーネントのコレクションを維持することで、以下のことを目指しています：

1.  **「コールドスタート」の摩擦を解消**: AIに模倣すべき明確なターゲットを提供し、スタイルや構造に関する詳細なプロンプトの必要性を減らします。
2.  **職人技の維持**: 自動生成されたコードが、セマンティックなHTML、アクセシブルなCSS、クリーンなJavaScriptの高い基準に準拠することを保証します。
3.  **将来への備え**: モデルのファインチューニングや、将来のWeb開発タスクのための少数ショットの例として使用できるデータセットを作成します。

## コア原則

### 1. バニラファースト

- **フレームワークなし**: 標準的なHTML、CSS、JavaScriptを使用します。これにより、寿命と移植性が保証されます。
- **ブラウザネイティブ**: 可能な限りビルドツールのポリフィルではなく、最新のブラウザ機能（ES Modules、CSS Variables、Grid/Flexbox）を活用します。

### 2. コアアーキテクチャ哲学：「APIとしてのCSS」

私たちは、**命令的なオーバーライド**から**リアクティブ/API駆動のスタイリング**へと移行することで、「カスケード戦争」と「詳細度地獄」を解決することを目指しています。

#### 問題点

従来のCSSでは、親が子のスタイルを強制的に上書きすることがよくあります（例：`.card .button { background: red !important; }`）。これは以下のような問題を引き起こします：

- **脆さ**: 子の内部構造を変更すると、親のオーバーライドが壊れる。
- **詳細度戦争**: スタイルの戦いに勝つために `!important` や深いネストを使用する。
- **予測不能性**: スタイルが予期せず漏れたり競合したりする「遠隔作用」。

#### 解決策：コンテキスト認識コンポーネント

スタイルを上書きするのではなく、**パラメータ（CSS変数）**を渡します。

- **API駆動**: コンポーネントはそのパブリックAPI（`--variant`のような変数）を定義します。
- **リアクティブ**: コンポーネントはこれらの変数を（`@container style(...)`経由で）リッスンし、自分自身を*どのように*レンダリングするかを決定します。
- **カプセル化**: 親はボタンが*どのように*赤くなるかを知りません。単に「danger（危険）」コンテキストを要求するだけです。

> **「コンポーネントにどのような見た目にするかを指示するのではなく、どのようなコンテキストにいるかを伝えてください。」**

### 3. レイアウト哲学：「グリッドファースト＆マージンフリー」

私たちは、**レイアウト**（幾何学/スペーシング）と**コンポーネント**（ルック＆フィール）を分離します。

#### 「マージンなし」ルール

コンポーネント（`c-`）は、**決して**外部マージンを持ってはいけません。

- **理由**: マージンはコンポーネントをコンテキスト依存にします。`margin-right: 20px`を持つボタンは、行の最後やサイドバーに配置されると不自然に見えます。
- **ルール**: 「コンポーネントは自分のピクセル（パディング/ボーダー）を所有し、レイアウトは空白（ギャップ/グリッド）を所有する。」

#### 「グリッドファースト」アプローチ

レイアウト（`l-`）は、構造とスペーシングを定義するためにCSS Gridを使用します。

- **マージンよりギャップ**: 均一なスペーシングには `gap` を使用します。
- **スペーシングとしてのトラック**: マージンの代わりに、`grid-template-columns/rows` を使用して特定の空白（例：`1fr 20px 100px`）を定義します。
- **明示的なエリア**: `c-` コンポーネントをラップするために `l-` コンテナを使用し、コンポーネントが配置に依存しないようにします。

**例:**

```html
<div class="l-grail">
	<div class="l-grail__header">
		<header class="c-header">...</header>
	</div>
	<div class="l-grail__main">
		<main class="c-main">...</main>
	</div>
	<div class="l-grail__side">
		<aside class="c-side">...</aside>
	</div>
	<div class="l-grail__footer">
		<footer class="c-footer">...</footer>
	</div>
</div>
```

```css
.l-grail {
	display: grid;
	grid-template-columns: 1fr 40px 300px;
	grid-template-rows: auto 60px 1fr 80px auto;
	grid-template-areas:
		'header header header'
		'.      .      .'
		'main   .      side'
		'.      .      .'
		'footer footer footer';
}

.l-grail__header {
	grid-area: header;
}
.l-grail__main {
	grid-area: main;
}
.l-grail__side {
	grid-area: side;
}
.l-grail__footer {
	grid-area: footer;
}
```

#### 例外：マージンを使用する場合

*コンポーネント*でのマージンは避けますが、特定のコンテキストでは `margin` が不可欠です。

1.  **フローコンテンツ（タイポグラフィと記事）** [重要]
    - **コンテキスト**: 要素が自然に積み重なる長文テキスト（ブログ記事、ドキュメントなど）の中。
    - **使用法**: 見出し、段落、リスト間の垂直方向のリズムを確立するために `margin-bottom` または `margin-top` を使用します。
    - **理由**: `gap` を使用するためだけにすべての段落をGrid/Flexコンテナでラップするのは過剰であり、セマンティック的にノイズが多いです。

2.  **自動整列**
    - **使用法**: Flexコンテナ内で要素を端に寄せるために `margin-left: auto` を使用します。
    - **理由**: これは `gap` では再現できない強力なレイアウトツールです。

3.  **視覚的調整**
    - **使用法**: 視覚的な重みを整えるためのネガティブマージンや微調整（例：ぶら下げ約物）。

### 4. コンポーネントアーキテクチャと命名

#### 命名規則

- **略語なし**: 明確さのために完全な単語を使用します。
  - _良い_: `button`, `navigation`, `card`
  - _悪い_: `btn`, `nav`, `cd`
- **プレフィックス**:
  - **`c-` (Component)**: UIパーツ（例：`c-button`, `c-card`）。
  - **`l-` (Layout)**: コンポーネントを配置する構造的コンテナ（例：`l-grid`, `l-container`）。
    - レイアウトはルック＆フィール（色、影）のスタイルを持たず、幾何学（グリッド、フレックス、スペーシング）のみを持ちます。
    - レイアウトは `c-` コンポーネントを含まなければなりません。

#### 修飾子と状態

- **コンテキストスタイリング（スタイルクエリ）**: バリエーションを制御するためにCSSコンテナクエリ（`@container style(...)`）を使用します。
  - **コンセプト**: コンポーネントは、コンテキスト（親）から継承された、または自分自身に設定されたCSS変数に基づいて適応します。
  - **実装**:
    1.  コンポーネントまたはその親にカスタムプロパティ（例：`--variant`）を定義します。
    2.  特定のスタイルを適用するために `@container style(--variant: value)` を使用します。
  - **利点**: スタイルを特定のクラスから切り離し、「コンテキストスタイリング」（例：ダークカード内のボタンが自動的にライトになる）を可能にします。

**例:**

```html
<!-- HTML -->
<button class="c-button" style="--variant: primary">Button</button>
```

```css
/* CSS */
.c-button {
	/* デフォルトスタイル */
	background: #eee;
	color: #333;
}

/* --variant: primary が継承または設定されている場合にスタイルを適用 */
@container style(--variant: primary) {
	.c-button {
		background: blue;
		color: white;
	}
}
```

### 5. インタラクション哲学：「スクリプトよりネイティブ」

私たちは、最新のHTMLとCSSの進化する機能に依存し、可能な限りJavaScriptなしでUIインタラクションを実装するよう努めています。

- **ゼロJSデフォルト**: イベントリスナーに手を伸ばす前に、「これはHTML/CSSでできるか？」と自問してください。
- **最新のプリミティブ**: アコーディオンには `<details>`、モーダルには `<dialog>`、オーバーレイには `:popover`、そしてスクロール駆動アニメーションを使用します。
- **CSS状態**: UI状態を処理するために `:checked`、`:target`、`:focus-within` を活用します。
- **JSの役割**: JavaScriptは、ビジネスロジック、API呼び出し、HTMLでは処理できない複雑な状態のために厳密に予約されています。

### 6. AI可読性戦略

このリポジトリのAIトレーニングへの有用性を最大化するために、以下を遵守します：

- **明示的なPropsマッピング**: Storybookの `args` は、HTML属性またはCSSクラスに直接マップする必要があります。これにより、AIは要件（例：「プライマリボタン」）と実装（`.btn--primary`）の因果関係を学習します。
- **バリエーションと状態**: 「ハッピーパス」だけを構築しないでください。`disabled`、`loading`、`empty`、`error` などの状態を明示的に実装し、文書化してください。
- **コンテキストコメント**: *何*だけでなく、*なぜ*を説明するためにコメントを使用してください。
  - _良い_: `/* z-index: 10; ヘッダーがヒーローコンテンツの上に留まるようにする */`
  - _悪い_: `/* z-index: 10; */`

### 7. コーディングスタイルガイド

#### タイポグラフィと単位

- **フォントサイズ**: デフォルトでは `rem` または `em` を使用します。
- **コンポーネントルート**: 常に `font-size: 1rem;` で参照フォントサイズをリセットします。
- **テキストプロパティ**: `line-height` と `letter-spacing` には `em` または単位なしの値を使用します。
- **スペーシング（パディング/マージン/ギャップ）**: `px` を使用します。
  - _根拠_: インラインスペーシングに `rem`/`em` を使用すると、ルートフォントサイズが大きくなったときに幅が過剰に拡大し、ブラウザの幅が変わっていなくてもレイアウトが崩れる可能性があります。`px` は、これらのコンテキストでより予測可能なスペーシングを提供します。

#### CSS変数（カスタムプロパティ）

- **命名規則**: `--_{component}-{property}-{type}`
  - コンポーネントスコープの変数は、グローバル変数と区別し、コンポーネントコンテキストに対して「プライベート」または「スコープ付き」であることを示すために、`--_`（ダブルダッシュ＋アンダースコア）で始める**必要があります**。
- **デザインシステム統合**:
  - コンポーネント変数をコンポーネントルートで定義します。
  - これらの変数は、`:root` で定義されたグローバル変数を参照する必要があります。
  - _目標_: HTMLの `style` 属性を介して直接テーマ設定やオーバーライドを可能にします。

**例:**

```css
:root {
	--color-primary-500: #3b82f6;
}

.card {
	/* グローバル変数を参照するコンポーネント変数を定義 */
	--_card-bg-color: var(--color-primary-500);

	font-size: 1rem; /* 参照をリセット */
	background-color: var(--_card-bg-color);
	padding: 16px; /* スペーシングにはpx */
}
```

## 「高精度」へのロードマップ

このリポジトリの「教育」品質を向上させるために：

- [ ] **コンポーネントカタログの拡大**: 一般的なUIパターン（フォーム、モーダル、ナビゲーション、フッター）をすべてカバーします。
- [ ] **アンチパターンの文書化**: AIがよくある間違いを避けるのを助けるために、「やってはいけないこと」のセクションを作成します。
- [ ] **セマンティックHTMLショーケース**: 複雑なドキュメント構造（article, aside, section, dl/dt/dd）に特化した例を作成します。
